import { Callout } from 'nextra/components';

# Approval workflows

_Increase the quality of your tracking plan with protected main branch and branch approvals_

<Callout type="info" emoji="ðŸ’¡">Approval workflows are available on the team and enterprise plans. See [plans and pricing](https://www.avo.app/pricing).</Callout>

Building a tracking plan is a team sport. Getting feedback from your team on the changes you're making to the tracking plan helps with building alignment and keeping the plan consistent. Approval workflows are a powerful tool for the peer-review process. The typical workflow looks something like this:

1. Product manager creates a branch and suggests changes to the tracking plan
2. Product manager requests a review from a data person and a developer
3. Data person and developer review the branch and provide feedback
4. Reviewers might request changes to the branch
5. Once everyone is aligned, the branch is approved
6. Developer implements the tracking from the branch
7. The branch is merged


<Callout type="info" emoji="ðŸ’¡">This is an example of a workflow and roles that participate in each step. The workflow is unique for every team.</Callout>

When reviewers need to conduct multiple review rounds (steps 3-5), they can use the ["Show changes since" filtering](/workflow/review#filtering-changes) on the tracking plan changes page to focus only on modifications made since their last review, making the approval process more efficient.

## Branch status

Branch status makes it transparent at which step the peer-review process is and when it is changed, notifications are sent out to assigned reviewers and all other branch collaborators.

The branch status is always visible in the left sidebar and in the [branch overview](/data-design/branches#branches-overview), accessible by clicking the Avo logo in the top left corner:

![Branch status](/images/data-design/branch-status.png)

The branch status is changed on the [tracking plan changes page](/workflow/review), accessible by clicking "View Changes" next to the branch status and below the branch name.

![How to access the tracking plan changes page](/images/data-design/tracking-plan-changes.png)


The available branch statuses in Avo are:

- **Draft**: The branch is currently being worked on. 
- **Ready for review**: The changes are ready for review from one or more of your team members. Once a branch has been marked as ready for review, make sure to assign a reviewer. 
- **Changes requested**: A reviewer has requested changes to the branch before it can be approved. 
- **Approved**: The changes on the branch have been approved and are ready to be implemented. 
- **Merged**: The branch has now served its purpose and been merged to the main tracking plan.
- **Closed**: The branch has been closed and the changes are not intended to be merged into the main tracking plan. 

## Configuring approval workflows

Approval workflows can be configured in three ways:

1. [Protected main branch](/data-design/branches/approval-workflows#protected-main-branch)
2. [Require admin approval](/data-design/branches/approval-workflows#require-admin-approval)
3. [Require multiple approvals](/data-design/branches/approval-workflows#require-multiple-approvals)

### Protected main branch

<Callout type="info" emoji="ðŸ’¡">Protected main branch is available on the team and enterprise plans. See [plans and pricing](https://www.avo.app/pricing).</Callout>

To make sure no one accidentally makes changes directly on the main branch and to encourage peer reviews of branches, you can opt in to protecting the main branch. That means:

- Only admins can make changes directly on the main branch
- Only admins can merge branches that haven't been approved by a reviewer (editor or admin)
- Branches marked as **Ready for Review**, **Changes Requested**, or **Approved** are locked and cannot be edited. To continue making changes, you must revert the branch back to **Draft** status, which will remove any existing approvals. Admins can bypass this lock if needed.


Enabling protected main branch is a prerequisite for using require admin approval and require multiple approvals.

To enable this configuration, click the settings wheel in your workspace, in Workspace settings go into the Permissions tab and check "Protected main branch".

![Protecting the main branch](/images/protected-main-branch.png)

### Require admin approval

<Callout type="info" emoji="ðŸ’¡">Require admin approval is available on the enterprise plan only. See [plans and pricing](https://www.avo.app/pricing).</Callout>

To make sure all tracking plan changes are reviewed by a dedicated group of people, you can opt in to require admin approval. That means that branch cannot be merged into the main branch unless at least one admin has approved the changes.

To enable this configuration, click the settings wheel in your workspace, in Workspace settings go into the Permissions tab and check "Require admin approval". Note that "Protected main branch" must be enabled to enable "Require admin approval".

![Required admin approval](/images/admin-approval.png)

### Require multiple approvals

<Callout type="info" emoji="ðŸ’¡">Require multiple approvals is available on the enterprise plan only. See [plans and pricing](https://www.avo.app/pricing).</Callout>

You can configure how many approvals are required to merge a branch. By default, only one approval is required, but you can require up to three approvals before a branch can be merged. When the branch status is changed to Draft or Request Changes, all previous approvals are removed and the approval counter resets.

When requiring multiple approvals, reviewers can use the [change filtering options](/workflow/review#filtering-changes) to focus their reviews on recent modifications rather than re-reviewing all changes from previous approval rounds.

To change the number of required approvals, click the settings wheel in your workspace, in Workspace settings go into the Permissions tab and change the "Number of required approvals". Note that "Protected main branch" must be enabled to enable "Require admin approval".

Requiring multiple approvals can be used in combination with required admin approvals. In that case, the number of required approvals is the number of admins that need to approve the changes before the branch can be merged.
